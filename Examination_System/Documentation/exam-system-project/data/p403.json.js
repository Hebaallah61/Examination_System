window.repositoryObject = {"parameters":[{"name":"crs_type","description":null,"mode":"IN","data_type":"nvarchar(50)","custom_fields":{},"linked_terms":[]},{"name":"std_ssn","description":null,"mode":"IN","data_type":"int","custom_fields":{},"linked_terms":[]},{"name":"t_fQ","description":null,"mode":"IN","data_type":"int","custom_fields":{},"linked_terms":[]},{"name":"M_Q","description":null,"mode":"IN","data_type":"int","custom_fields":{},"linked_terms":[]}],"parameters_custom_fields":[],"dependencies":{"uses":[],"used_by":[]},"object_id":"p403","name":"ExamStored.Exam_Generation","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"Exam System Project","id":"d11"}},{"field":"Schema","value":"ExamStored"},{"field":"Name","value":"Exam_Generation"},{"field":"Type","value":"Procedure"}],"script":"----------------------------------------\r\n--exam stored proc\r\n\r\ncreate proc Exam_Generation @crs_type nvarchar(50), @std_ssn int , @t_fQ int , @M_Q int\r\nas\r\nif (@t_fQ + @M_Q <>10)\r\nselect 'Enter valid number of question'\r\nelse \r\nbegin\r\nbegin try\r\ndeclare @crs_id int\r\ndeclare @questions table (quest_id int)\r\n-- create new exam\r\nselect @crs_id=id from Course where name=@crs_type\r\ninsert into Exam values (60,@crs_id)\r\n-- insert question \r\n\r\ninsert into @questions\r\nselect top(@t_fQ) id from Question \r\nwhere type='t/f'and crs_id=@crs_id\r\norder by NEWID()\r\n--\r\ninsert into @questions\r\nselect top(@M_Q) id from Question \r\nwhere type='mcq'and crs_id=@crs_id\r\norder by NEWID()\r\n-- create new exam  \r\n-- generated 10 question\r\ndeclare @CurrentExam_id int \r\nselect top(1)@CurrentExam_id=id from Exam order by id desc\r\ndeclare c1 cursor\r\nfor select * from @questions\r\nfor read only\r\ndeclare @id int \r\nopen c1 \r\nfetch c1 into @id\r\nwhile @@FETCH_STATUS=0\r\nbegin\r\ninsert into Exam_std_quest values (@CurrentExam_id,@id,@std_ssn,GETDATE(),null)\r\nfetch c1 into @id\r\nend\r\nclose c1 \r\ndeallocate c1\r\nselect * from Exam_std_quest esq\r\ninner join Question q\r\non esq.quest_id=q.id\r\nwhere\r\nex_id=@CurrentExam_id and std_ssn=@std_ssn \r\norder by quest_id\r\nend try\r\nbegin catch\r\nselect 'An error has occured'\r\nend catch \r\nend","imported_at":"2023-01-17 08:53"};