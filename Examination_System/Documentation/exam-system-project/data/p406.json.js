window.repositoryObject = {"parameters":[{"name":"ex_id","description":null,"mode":"IN","data_type":"int","custom_fields":{},"linked_terms":[]}],"parameters_custom_fields":[],"dependencies":{"uses":[],"used_by":[]},"object_id":"p406","name":"Reports.freeFormReport","subtype":"PROCEDURE","is_user_defined":false,"description":null,"summary":[{"field":"Documentation","value":{"_type":"link","name":"Exam System Project","id":"d11"}},{"field":"Schema","value":"Reports"},{"field":"Name","value":"freeFormReport"},{"field":"Type","value":"Procedure"}],"script":"-- this is the free form report\r\ncreate proc freeFormReport @ex_id int \r\nas\r\ndeclare @counter int =1\r\ndeclare c1 cursor \r\nfor \r\nselect q.title,LEAD(q.title) over (order by id) as titleNext ,qc.choice from Question q inner join Question_Choices qc \r\non q.id=qc.ques_id inner join Exam_std_quest esq on \r\nesq.quest_id=q.id where esq.ex_id=@ex_id\r\nfor read only\r\ndeclare @currentTitle nvarchar(200),@nextTitle nvarchar(200),@choice nvarchar(200)\r\ndeclare @showTable table (title nvarchar(200),choice nvarchar(200))\r\nopen c1\r\nfetch c1 into @currentTitle,@nextTitle,@choice \r\nwhile @@FETCH_STATUS=0\r\nbegin\r\ndeclare @title nvarchar(200)= concat(@counter,') ',@currentTitle)\r\ninsert into @showTable values (@title,@choice)\r\nif @currentTitle<>@nextTitle\r\nset @counter=@counter+1\r\nfetch c1 into @currentTitle,@nextTitle,@choice \r\nend\r\nclose c1 \r\ndeallocate c1\r\nselect * from @showTable","imported_at":"2023-01-17 08:53"};